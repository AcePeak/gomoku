<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Gomoku â€“ Play</title>
  <link rel="stylesheet" href="css/style.css?v=2" />
</head>
<body data-theme="dark">

  <!-- ============================================================
       Header
       ============================================================ -->
  <header class="game-header">
    <button id="btn-menu" class="icon-btn" title="Back to Menu">â† Menu</button>
    <h1 class="header-title">Gomoku</h1>
    <div class="header-actions">
      <button id="btn-sound" class="icon-btn" title="Toggle Sound">ğŸ”Š</button>
      <button id="btn-theme" class="icon-btn" title="Toggle Theme">ğŸŒ™</button>
    </div>
  </header>

  <!-- ============================================================
       Overlay: Mode Select
       ============================================================ -->
  <div id="overlay-mode" class="overlay">
    <div class="overlay-content mode-select">
      <h2 class="overlay-title gold-text">Gomoku</h2>
      <p class="overlay-subtitle">Five in a Row</p>
      <div class="mode-buttons">
        <button id="btn-free-play" class="btn btn-primary btn-large">
          <span class="btn-icon">ğŸ¯</span> Free Play
        </button>
        <button id="btn-campaign" class="btn btn-campaign btn-large">
          <span class="btn-icon">ğŸ†</span> Campaign
        </button>
        <button id="btn-training" class="btn btn-training btn-large">
          <span class="btn-icon">ğŸ“–</span> Training
        </button>
      </div>
    </div>
  </div>

  <!-- ============================================================
       Overlay: Difficulty Select (Free Play)
       ============================================================ -->
  <div id="overlay-difficulty" class="overlay hidden">
    <div class="overlay-content">
      <h2 class="overlay-title">Choose Difficulty</h2>
      <div class="difficulty-grid">
        <button data-difficulty="easy" class="btn btn-difficulty">
          <span class="diff-emoji">ğŸ˜Š</span>
          <span class="diff-label">Easy</span>
          <span class="diff-desc">Casual play</span>
        </button>
        <button data-difficulty="medium" class="btn btn-difficulty">
          <span class="diff-emoji">ğŸ¤”</span>
          <span class="diff-label">Medium</span>
          <span class="diff-desc">A fair challenge</span>
        </button>
        <button data-difficulty="hard" class="btn btn-difficulty">
          <span class="diff-emoji">ğŸ˜¤</span>
          <span class="diff-label">Hard</span>
          <span class="diff-desc">Serious opponent</span>
        </button>
        <button data-difficulty="master" class="btn btn-difficulty">
          <span class="diff-emoji">ğŸ§ </span>
          <span class="diff-label">Master</span>
          <span class="diff-desc">Good luckâ€¦</span>
        </button>
      </div>
      <button id="btn-diff-back" class="btn btn-back">â† Back</button>
    </div>
  </div>

  <!-- ============================================================
       Overlay: Level Select (Campaign)
       ============================================================ -->
  <div id="overlay-levels" class="overlay hidden">
    <div class="overlay-content overlay-levels-content">
      <h2 class="overlay-title">Campaign</h2>
      <p id="campaign-total-stars" class="total-stars">â­ 0 / 30</p>
      <div id="level-grid" class="level-grid">
        <!-- Generated by JS -->
      </div>
      <button id="btn-levels-back" class="btn btn-back">â† Back</button>
    </div>
  </div>

  <!-- ============================================================
       Overlay: Level Complete / Failed (Campaign)
       ============================================================ -->
  <div id="overlay-complete" class="overlay hidden">
    <div class="overlay-content popup-complete">
      <h2 id="complete-title" class="overlay-title">Level Complete!</h2>
      <div id="complete-stars" class="star-display">
        <span class="star">â˜†</span>
        <span class="star">â˜†</span>
        <span class="star">â˜†</span>
      </div>
      <p id="complete-message" class="complete-msg"></p>
      <div class="popup-buttons">
        <button id="btn-next-level" class="btn btn-primary">Next Level â†’</button>
        <button id="btn-replay" class="btn btn-secondary">â†© Replay</button>
        <button id="btn-to-levels" class="btn btn-secondary">ğŸ“‹ Levels</button>
      </div>
    </div>
  </div>

  <!-- ============================================================
       Overlay: Game Over (Free Play)
       ============================================================ -->
  <div id="overlay-gameover" class="overlay hidden">
    <div class="overlay-content popup-gameover">
      <h2 id="gameover-title" class="overlay-title">Game Over</h2>
      <p id="gameover-message" class="gameover-msg"></p>
      <div class="popup-buttons">
        <button id="btn-play-again" class="btn btn-primary">Play Again</button>
        <button id="btn-change-diff" class="btn btn-secondary">Change Difficulty</button>
        <button id="btn-to-menu" class="btn btn-secondary">â† Menu</button>
      </div>
    </div>
  </div>

  <!-- ============================================================
       Overlay: Training Game List
       ============================================================ -->
  <div id="overlay-training" class="overlay hidden">
    <div class="overlay-content overlay-levels-content">
      <h2 class="overlay-title">ğŸ“– ç»å…¸æ£‹å±€</h2>
      <p class="overlay-subtitle" id="training-subtitle">ç²¾é€‰è‡ª AI åƒå±€å¯¹å¼ˆ</p>
      <div class="training-filters" id="training-filters">
        <button class="btn-tag active" data-tag="all">å…¨éƒ¨</button>
        <button class="btn-tag" data-tag="æ”»é˜²æ¿€çƒˆ">æ”»é˜²æ¿€çƒˆ</button>
        <button class="btn-tag" data-tag="é€†è½¬">é€†è½¬</button>
        <button class="btn-tag" data-tag="é€Ÿèƒœ">é€Ÿèƒœ</button>
        <button class="btn-tag" data-tag="æŒä¹…æˆ˜">æŒä¹…æˆ˜</button>
      </div>
      <div id="training-list" class="training-list">
        <!-- Generated by JS -->
      </div>
      <button id="btn-training-back" class="btn btn-back">â† Back</button>
    </div>
  </div>

  <!-- ============================================================
       Game Area (hidden until a mode is chosen)
       ============================================================ -->
  <div class="game-wrapper hidden" id="game-area">

    <!-- Board -->
    <div class="board-container">
      <canvas id="board-canvas" width="720" height="720"></canvas>
      <!-- AI thinking indicator -->
      <div id="ai-thinking" class="ai-thinking hidden">
        <div class="spinner"></div>
        <span>AI thinkingâ€¦</span>
      </div>
    </div>

    <!-- Sidebar -->
    <aside class="sidebar">

      <!-- Turn -->
      <div class="panel">
        <h3>Current Turn</h3>
        <div class="turn-row">
          <div id="turn-indicator" class="turn-stone black"></div>
          <span id="turn-label">Your turn</span>
        </div>
      </div>

      <!-- Score (free play only) -->
      <div class="panel" id="panel-score">
        <h3>Score</h3>
        <div class="score-grid">
          <div class="score-item">
            <span class="label">You (âš«)</span>
            <span id="score-black" class="value black-text">0</span>
          </div>
          <div class="score-item">
            <span class="label">AI (âšª)</span>
            <span id="score-white" class="value white-text">0</span>
          </div>
        </div>
      </div>

      <!-- Level Info (campaign only) -->
      <div class="panel hidden" id="panel-level-info">
        <h3>Level</h3>
        <div id="level-name" class="level-name-display"></div>
        <div id="level-moves" class="level-moves-display">Moves: 0</div>
      </div>

      <!-- Power Stones (campaign only) -->
      <div class="panel hidden" id="panel-powers">
        <h3>Power Stones</h3>
        <div class="power-stones">
          <button id="power-bomb" class="power-btn" data-power="bomb" title="Remove 1 opponent stone">
            <span class="power-icon">ğŸ’£</span>
            <span class="power-label">Bomb</span>
            <span class="power-count" id="count-bomb">0</span>
          </button>
          <button id="power-shield" class="power-btn" data-power="shield" title="Block 1 cell">
            <span class="power-icon">ğŸ›¡ï¸</span>
            <span class="power-label">Shield</span>
            <span class="power-count" id="count-shield">0</span>
          </button>
          <button id="power-double" class="power-btn" data-power="double" title="Place 2 stones in 1 turn">
            <span class="power-icon">âš¡</span>
            <span class="power-label">Double</span>
            <span class="power-count" id="count-double">0</span>
          </button>
        </div>
      </div>

      <!-- Training Controls (training mode only) -->
      <div class="panel hidden" id="panel-training">
        <h3>æ£‹è°±å›æ”¾</h3>
        <div id="training-game-title" class="level-name-display"></div>
        <div id="training-game-desc" class="level-moves-display" style="margin-bottom:0.5rem"></div>
        <div id="training-annotation" class="training-annotation hidden"></div>
        <div class="training-controls">
          <button id="btn-t-start" class="btn btn-secondary btn-sm" title="è·³åˆ°å¼€å¤´">â®</button>
          <button id="btn-t-prev" class="btn btn-secondary btn-sm" title="ä¸Šä¸€æ‰‹">â—€</button>
          <button id="btn-t-auto" class="btn btn-primary btn-sm" title="è‡ªåŠ¨æ’­æ”¾">â–¶</button>
          <button id="btn-t-next" class="btn btn-secondary btn-sm" title="ä¸‹ä¸€æ‰‹">â–¶â–¶</button>
          <button id="btn-t-end" class="btn btn-secondary btn-sm" title="è·³åˆ°ç»“å°¾">â­</button>
        </div>
        <div id="training-progress" class="training-progress">0 / 0</div>
        <div class="training-mode-toggle">
          <button id="btn-quiz-mode" class="btn btn-secondary btn-sm" style="width:100%;margin-top:0.5rem">ğŸ§  çŒœä¸€æ‰‹æ¨¡å¼</button>
        </div>
      </div>

      <!-- Actions -->
      <div class="panel" id="panel-actions">
        <h3>Actions</h3>
        <div class="btn-group">
          <button id="btn-new-game" class="btn btn-primary">âœ¦ New Game</button>
          <button id="btn-undo" class="btn btn-secondary">â†© Undo</button>
        </div>
      </div>

    </aside>
  </div>

  <!-- ============================================================
       Status Bar
       ============================================================ -->
  <div class="status-bar">
    <span id="status-message">Welcome to Gomoku!</span>
  </div>

  <script type="module" src="js/app.js"></script>
</body>
</html>
